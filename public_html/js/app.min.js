var app=app||{};!function(e){"use strict";app={init:function(){this.map.init(),this.faq.init(),this.fixmenu.init()}}}(document.body);var app=app||{};!function(e){"use strict";$.app=$.app=$.app||{};var t,e=$("body");$.app.ajaxForm={config:{form_class:".form-ajax",form_reset:"form-reset",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",error_message_class:"j-error-message",error_message_addclass:"show",form_label:".form__wrapper",checkbox_label:"checkbox__label"},callback_stack:{},extend:function(e){if(t=this,"undefined"!=typeof e){var o;for(o in e)"undefined"!=typeof t.config[o]&&(t.config[o]=e[o])}},default_handler:function(e,o){if(t=this,o.status)o.hasOwnProperty("redirect_url")&&(window.location.href=o.redirect_url);else if("undefined"!=typeof o.errors||"undefined"!=typeof o.error_message){var a,n;"undefined"!=typeof o.errors&&(a=o.errors),"undefined"!=typeof o.error_message&&(n=o.error_message),t.validation(e,a,o.error_message)}o.hasOwnProperty("open_popup")&&($("body").find(".popup.is-open").length?$.popup.close($("body").find(".popup.is-open"),function(){$.popup.open(o.open_popup)}):$.popup.open(o.open_popup)),o.hasOwnProperty("message")&&$.popup.message(o.title,o.message)},validation:function(e,o,a){t=this,e.find("."+t.config.error_class).removeClass(t.config.error_class),e.find("."+t.config.error_message).remove(),e.find("."+t.config.error_message_class).removeClass(t.config.error_message_addclass);var n,i;setTimeout(function(){if("undefined"!=typeof a&&""!==a&&(e.find("."+t.config.error_message_class).html(a),e.find("."+t.config.error_message_class).addClass(t.config.error_message_addclass)),"undefined"!=typeof o&&""!==o)for(n in o)e.find('input[name="'+n+'"]').length>0&&(i=e.find('input[name="'+n+'"]')),e.find('select[name="'+n+'"]').length>0&&(i=e.find('select[name="'+n+'"]')),e.find('textarea[name="'+n+'"]').length>0&&(i=e.find('textarea[name="'+n+'"]')),i.closest("."+t.config.checkbox_label).length>0&&(i=i.closest("."+t.config.checkbox_label)),"undefined"!=typeof i&&(i.addClass(t.config.error_class),i.closest(t.config.form_label).append('<div class="'+t.config.error_message+'">'+o[n]+"</div>"))},10)},upload:function(){t=this,e.on("submit",".form-file-upload",function(e){return AIM.submit(this,{onStart:function(){},onComplete:function(e){"object"==typeof e&&e.status===!0&&e.hasOwnProperty("photo_url")}})}),$(document).on("change",".upload_button_onchange",function(){$(this).closest(".upload_button").find(".upload_button_field").length>0&&$(this).closest(".upload_button").find(".upload_button_field").html($(this).val())})},send:function(e,t,o,a,n){"function"!=typeof a&&(a=function(){}),"function"!=typeof n&&(n=function(){});try{$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:e,type:t,data:o,contentType:!1,processData:"get"==t.toLowerCase(),success:a,error:n,dataType:"JSON"})}catch(i){}},initLink:function(){t=this,e.on("click",t.config.link_class,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var o=$(this);if(!o.data("is-busy")){o.data("is-busy",!0);var a=$(this).attr("href")||$(this).data("action"),n=$(this).data("method")||"get",i={};t.send(a,n,i,function(e){o.data("callback")&&t.callback_stack.hasOwnProperty(o.data("callback"))?t.callback_stack[o.data("callback")](o,e):t.default_handler(o,e),e.status===!0,o.data("is-busy",!1)},function(e){t.default_handler(o,e),o.data("is-busy",!1)})}})},initForm:function(){t=this,e.on("submit",t.config.form_class,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var o=$(this),a=o.attr("action"),n=o.attr("method")||"post",i=window.FormData?new FormData(o[0]):o.serialize();if(!o.data("is-busy"))return o.data("is-busy",!0),"undefined"!=typeof button&&(button.data("loading")&&(button.data("original",button.text()),button.text(button.data("loading"))),button.addClass("preload")),!(o.data("precallback")&&t.callback_stack.hasOwnProperty(o.data("precallback"))&&!t.callback_stack[o.data("precallback")](o))&&void t.send(a,n,i,function(e){o.data("callback")&&t.callback_stack.hasOwnProperty(o.data("callback"))?t.callback_stack[o.data("callback")](o,e):t.default_handler(o,e),e.status===!0&&o.hasClass(t.config.form_reset)&&(o.find("."+t.config.error_class).removeClass(t.config.error_class),o.get(0).reset()),"undefined"!=typeof button&&(button.data("original")&&button.text(button.data("original")),button.removeClass("preload")),o.data("is-busy",!1)},function(e){t.default_handler(o,e),o.data("is-busy",!1)})})},init:function(e){this.extend(e),this.initForm(),this.initLink()}},app.ajaxForm.init()}(document.body);var app=app||{};!function(e){"use strict";app.faq={init:function(){$("body").on("click",".j-faq-trigger",function(e){e.preventDefault();var t=$(this).closest(".j-faq");return t.toggleClass("_open"),!1})}}}(document.body);var app=app||{};!function(e){"use strict";app.fixmenu={fixMenu:function(e,t){t>=159?e.hasClass("_sticked")||e.addClass("_sticked"):e.hasClass("_sticked")&&e.removeClass("_sticked")},init:function(){var e=$("#navigation"),t=this;t.fixMenu(e,$(window).scrollTop()),$(window).on("scroll",function(){t.fixMenu(e,$(window).scrollTop())})}}}(document.body);var app=app||{};!function(e){"use strict";app.map={_mapObject:null,_geoObject:null,getData:function(e){var t,o=null,a=null;if(e.data("coords")){a=e.data("coords").split(",");for(t in a)a[t]=$.trim(a[t]);2!==a.length&&(a=null)}return e.attr("id")&&(o=e.attr("id")),{id:o,coords:a}},drowMap:function(e){var t=this,o=this.getData(e);ymaps.ready(function(){t._mapObject=new ymaps.Map(o.id,{center:[o.coords[0],o.coords[1]],zoom:13,controls:["zoomControl","searchControl","typeSelector","fullscreenControl"]}),t._mapObject.behaviors.disable("scrollZoom"),t._mapObject.controls.get("zoomControl").options.set("size","small"),t._mapObject.controls.get("zoomControl").options.set("position",{right:10,top:50}),t._mapObject.geoObjects.add(new ymaps.Placemark([o.coords[0],o.coords[1]],{},{preset:"islands#dotIcon",iconColor:"#735184"}))})},init:function(){var e=this;$(".j-map").length&&$(".j-map").each(function(){e.drowMap($(this))})}}}(document.body);var app=app||{};!function(e){"use strict";var t;app.sandwich={config:{keyHooks:!1,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:".overlay"},extend:function(e){if(t=this,"undefined"!=typeof e){var o;for(o in e)"undefined"!=typeof t.config[o]&&(t.config[o]=e[o])}},isOpen:function(){return $("body").hasClass("page-visible")},hide:function(){$("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},10),$(this.config.overlay).css({visibility:"hidden"})},toggle:function(){$("body").hasClass("page-visible")?($("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},200)):($("body").addClass("page-open"),setTimeout(function(){$("body").addClass("page-visible")},10));var e="visible";$("body").hasClass("page-open")||(e="hidden"),$(t.config.overlay).css({visibility:e})},sandwichTrigger:function(){t=this,t.config.keyHooks&&$("body").on("keydown",function(e){27==e.keyCode&&t.isOpen()&&t.toggle()}),$("body").on("click",t.config.selector,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,t.toggle()})},overlayTrigger:function(){t=this,$("body").on("click",t.config.overlay,function(e){t.hide()})},init:function(e){this.extend(e),this.sandwichTrigger(),this.overlayTrigger()}}}(document.body),$(document).ready(function(){app.init()});