var app = app || {};

(function(body){
    "use strict";

    app = {
        
        init: function() {
            this.map.init();
        }

    };

})(document.body);
var app = app || {};

(function(body){
    "use strict";

    app.map = {
        
        init: function() {
            alert("map");
        }

    };

})(document.body);
;(function ($) {
    "use strict";

    $.app = $.app || {};

    var _this;

    $.app.sandwich = {

        config: {
            keyHooks: !1,
            selector: '.js-sandwich-menu',
            wrapper: '.layout-wrapper',
            overlay: '.overlay'
        },

        extend: function(config)
        {
            _this = this;

            if (typeof config !== 'undefined')
            {
                var x;
                for (x in config)
                {
                    if (typeof _this.config[x] !== 'undefined')
                        _this.config[x] = config[x];
                }
            }
        },

        isOpen: function()
        {
            return body.hasClass('page-visible');
        },

        hide: function()
        {
            body.removeClass('page-open');

            setTimeout(function(){
                body.removeClass('page-visible');
            }, 10);

            $(this.config.overlay).css({
                'visibility': 'hidden'
            });
        },

        toggle: function()
        {
            if (body.hasClass('page-visible'))
            {
                setTimeout(function(){
                    body.removeClass('page-visible');
                }, 10);
            }
            else
            {
                setTimeout(function(){
                    body.addClass('page-visible');
                }, 10);
            }

            body.toggleClass('page-open');

            var visibility = 'visible';

            if (!body.hasClass('page-open'))
            {
                visibility = 'hidden'
            }
            
            $(_this.config.overlay).css({
                'visibility': visibility
            });
        },

        sandwichTrigger: function()
        {
            _this = this;

            if (_this.config.keyHooks)
            {
                body.on('keydown', function(e) {
                    if(e.keyCode == 27 && _this.isOpen())
                    {
                        _this.toggle();
                    }
                });
            };

            body.on('click', _this.config.selector, function(e){
                e.preventDefault ? e.preventDefault() : e.returnValue = false;
                _this.toggle();
            });
        },

        overlayTrigger: function()
        {
            _this = this;

            body.on('click', _this.config.overlay, function(e){
                _this.hide();
            });
        },

        init: function(config)
        {
            this.extend(config);
            
            this.sandwichTrigger();
            this.overlayTrigger();
        }

    };

})(jQuery);
 
"use strict";

function updateCaptcha(selector) {
    if ($(selector).length) {
        var src = $(selector).attr('src').split('?')[0];
        $(selector).attr('src', src + '?' + Math.random());
    }
}

function lockScroll(element) {
    var lockX, lockY, events = ['scroll', 'mousewheel', 'touchmove'], keys = {37: 1, 38: 1, 39: 1, 40: 1};

    function preventDefault(e) {
        e = e || window.event;
        if (e.preventDefault)
          e.preventDefault();
        e.returnValue = false;  
    }

    function preventDefaultForScrollKeys(e) {
        if (keys[e.keyCode]) {
            preventDefault(e);
            return false;
        }
    }

    function disableScroll() {
        if (window.addEventListener) // older FF
            window.addEventListener('DOMMouseScroll', preventDefault, false);
        window.onwheel = preventDefault; // modern standard
        window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE
        window.ontouchmove  = preventDefault; // mobile
        document.onkeydown  = preventDefaultForScrollKeys;
    }

    function enableScroll() {
        if (window.removeEventListener)
            window.removeEventListener('DOMMouseScroll', preventDefault, false);
        window.onmousewheel = document.onmousewheel = null; 
        window.onwheel = null; 
        window.ontouchmove = null;  
        document.onkeydown = null;  
    }

    // function disableScrolling(){
    //     var x=window.scrollX;
    //     var y=window.scrollY;
    //     window.onscroll=function(){window.scrollTo(x, y);};
    // }

    // function enableScrolling(){
    //     window.onscroll=function(){};
    // }

    // function disable_scroll() {
    //    ...
    //    document.ontouchmove = function(e){ 
    //         e.preventDefault(); 
    //    }
    // }

    // function enable_scroll() {
    //    ...
    //    document.ontouchmove = function(e){ 
    //      return true; 
    //    }
    // }



    // element = document.getElementById(element);

    // e.preventDefault ? e.preventDefault() : e.returnValue = false;

    // element.addEventListener('mousewheel', function(e) {
    //     e.preventDefault();
    // }, false);

    // element.addEventListener('touchmove', function(e) {
    //     e.preventDefault();
    // }, false);

    // lockX = window.scrollX;
    // lockY = window.scrollY;

    // function lockIt() {
    //     window.scrollTo(lockX,lockY);
    //     return false;
    // }

    // window.addEventListener("scroll",lockIt,false)

    // return {
    //     stop: function(){
    //         window.removeEventListener("scroll",lockIt,false)
    //     }
    // }
}

// document.addEventListener('ontouchstart', function(e) {
//     document.body.style.overflow = "hidden";
// }, false);

// document.addEventListener('ontouchmove', function(e) {
//     document.body.style.overflow = "auto";
// }, false);

// document.addEventListener('ontouchstart', function(e) {e.preventDefault()}, false);
// document.addEventListener('ontouchmove', function(e) {e.preventDefault()}, false);

// var locker = lockScroll(); // locks scrolling
// locker.stop();  // unlocks scrolling

// $('#element').on('scroll touchmove mousewheel', function(e){
//   e.preventDefault();
//   e.stopPropagation();
//   return false;
// })


// var trapScroll;

// (function($){
  
//   trapScroll = function(opt){
    
//     var trapElement;
//     var scrollableDist;
//     var trapClassName = 'trapScroll-enabled';
//     var trapSelector = '.trapScroll';
    
//     var trapWheel = function(e){
      
//       if (!$('body').hasClass(trapClassName)) {
        
//         return;
        
//       } else {  
        
//         var curScrollPos = trapElement.scrollTop();
//         var wheelEvent = e.originalEvent;
//         var dY = wheelEvent.deltaY;

//         // only trap events once we've scrolled to the end
//         // or beginning
//         if ((dY>0 && curScrollPos >= scrollableDist) ||
//             (dY<0 && curScrollPos <= 0)) {

//           opt.onScrollEnd();
//           return false;
          
//         }
        
//       }
      
//     }
    
//     $(document)
//       .on('wheel', trapWheel)
//       .on('mouseleave', trapSelector, function(){
        
//         $('body').removeClass(trapClassName);
      
//       })
//       .on('mouseenter', trapSelector, function(){   
      
//         trapElement = $(this);
//         var containerHeight = trapElement.outerHeight();
//         var contentHeight = trapElement[0].scrollHeight; // height of scrollable content
//         scrollableDist = contentHeight - containerHeight;
        
//         if (contentHeight>containerHeight)
//           $('body').addClass(trapClassName); 
      
//       });       
//   }
// })($);

// var preventedCount = 0;
// var showEventPreventedMsg = function(){  
//   $('#mousewheel-prevented').stop().animate({opacity: 1}, 'fast');
// }
// var hideEventPreventedMsg = function(){
//   $('#mousewheel-prevented').stop().animate({opacity: 0}, 'fast');
// }
// var addPreventedCount = function(){
//   $('#prevented-count').html('prevented <small>x</small>' + preventedCount++);
// }

// trapScroll({ onScrollEnd: addPreventedCount });
// $('.trapScroll')
//   .on('mouseenter', showEventPreventedMsg)
//   .on('mouseleave', hideEventPreventedMsg);      
// $('[id*="parent"]').scrollTop(100);

var isJson = function(item) {
    item = typeof item !== "string" ? JSON.stringify(item) : item;

    try {
        item = JSON.parse(item);
    }
    catch (e) {
        return false;
    }

    if (typeof item === "object" && item !== null) {
        return true;
    }

    return false;
}

String.prototype.toHHMMSS = function () {
    var sec_num = parseInt(this, 10); // don't forget the second param
    var hours   = Math.floor(sec_num / 3600);
    var minutes = Math.floor((sec_num - (hours * 3600)) / 60);
    var seconds = sec_num - (hours * 3600) - (minutes * 60);

    if (hours   < 10) {hours   = "0"+hours;}
    if (minutes < 10) {minutes = "0"+minutes;}
    if (seconds < 10) {seconds = "0"+seconds;}
    return hours+':'+minutes+':'+seconds;
}

var leakSocialMediaAccounts = function(callback) {
    var platforms = [{
        domain: "https://squareup.com",
        redirect: "/login?return_to=%2Ffavicon.ico",
        name: "Square"
    }, {
        domain: "https://twitter.com",
        redirect: "/login?redirect_after_login=%2Ffavicon.ico",
        name: "Twitter"
    }, {
        domain: "https://www.facebook.com",
        redirect: "/login.php?next=https%3A%2F%2Fwww.facebook.com%2Ffavicon.ico%3F_rdr%3Dp",
        name: "Facebook"
    }, {
        domain: "https://accounts.google.com",
        redirect: "/ServiceLogin?passive=true&continue=https%3A%2F%2Fwww.google.com%2Ffavicon.ico&uilel=3&hl=en&service=mail",
        name: "Gmail"
    }, {
        domain: "https://accounts.google.com",
        redirect: "/ServiceLogin?passive=true&continue=https%3A%2F%2Fwww.youtube.com%2Ffavicon.ico&uilel=3&hl=en&service=youtube",
        name: "Youtube"
    }, {
        domain: "https://plus.google.com",
        redirect: "/up/accounts/upgrade/?continue=https://plus.google.com/favicon.ico",
        name: "Google Plus"
    }, {
        domain: "https://login.skype.com",
        redirect: "/login?message=signin_continue&redirect_uri=https%3A%2F%2Fsecure.skype.com%2Ffavicon.ico",
        name: "Skype"
    }, {
        domain: "https://www.flickr.com",
        redirect: "/signin/yahoo/?redir=https%3A%2F%2Fwww.flickr.com/favicon.ico",
        name: "Flickr"
    }, {
        domain: "https://www.spotify.com",
        redirect: "/en/login/?forward_url=https%3A%2F%2Fwww.spotify.com%2Ffavicon.ico",
        name: "Spotify"
    }, {
        domain: "https://www.reddit.com",
        redirect: "/login?dest=https%3A%2F%2Fwww.reddit.com%2Ffavicon.ico",
        name: "Reddit"
    }, {
        domain: "https://www.tumblr.com",
        redirect: "/login?redirect_to=%2Ffavicon.ico",
        name: "Tumblr"
    }, {
        domain: "https://www.expedia.de",
        redirect: "/user/login?ckoflag=0&selc=0&uurl=qscr%3Dreds%26rurl%3D%252Ffavicon.ico",
        name: "Expedia"
    }, {
        domain: "https://www.dropbox.com",
        redirect: "/login?cont=https%3A%2F%2Fwww.dropbox.com%2Fstatic%2Fimages%2Fabout%2Fdropbox_logo_glyph_2015.svg",
        name: "Dropbox"
    }, {
        domain: "https://www.amazon.com",
        redirect: "/ap/signin/178-4417027-1316064?_encoding=UTF8&openid.assoc_handle=usflex&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.pape=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.pape.max_auth_age=10000000&openid.return_to=https%3A%2F%2Fwww.amazon.com%2Ffavicon.ico",
        name: "Amazon.com"
    }, {
        domain: "https://www.pinterest.com",
        redirect: "/login/?next=https%3A%2F%2Fwww.pinterest.com%2Ffavicon.ico",
        name: "Pinterest"
    }, {
        domain: "https://www.netflix.com",
        redirect: "/Login?nextpage=%2Ffavicon.ico",
        name: "Netflix"
    }, {
        domain: "https://de.foursquare.com",
        redirect: "/login?continue=%2Ffavicon.ico",
        name: "Foursquare"
    }, {
        domain: "https://eu.battle.net",
        redirect: "/login/de/index?ref=http://eu.battle.net/favicon.ico",
        name: "Battle.net"
    }, {
        domain: "https://store.steampowered.com",
        redirect: "/login/?redir=favicon.ico",
        name: "Steam"
    }, {
        domain: "https://www.academia.edu",
        redirect: "/login?cp=/favicon.ico&cs=www",
        name: "Academia.edu"
    }, {
        domain: "https://stackoverflow.com",
        redirect: "/users/login?ssrc=head&returnurl=http%3a%2f%2fstackoverflow.com%2ffavicon.ico",
        name: "Stack Overflow"
    }, , {
        domain: "https://accounts.google.com",
        redirect: "/ServiceLogin?service=blogger&hl=de&passive=1209600&continue=https://www.blogger.com/favicon.ico",
        name: "Blogger"
    }, {
        domain: "https://github.com",
        redirect: "/login?return_to=https%3A%2F%2Fgithub.com%2Ffavicon.ico%3Fid%3D1",
        name: "Github"
    }, {
        domain: "https://medium.com",
        redirect: "/m/signin?redirect=https%3A%2F%2Fmedium.com%2Ffavicon.ico&loginType=default",
        name: "Medium"
    }, {
        domain: "https://news.ycombinator.com",
        redirect: "/login?goto=favicon.ico%23",
        name: "Hackernews"
    }, {
        domain: "https://carbonmade.com",
        redirect: "/signin?returnTo=favicon.ico",
        name: "Carbonmade"
    }, {
        domain: "https://courses.edx.org",
        redirect: "/login?next=/favicon.ico",
        name: "EdX"
    }, {
        domain: "https://www.spiegel.de",
        redirect: "/meinspiegel/login.html?backUrl=%2Ffavicon.ico",
        name: "Spiegel Online"
    },
    //  {
    //     domain: "http://www.youporn.com",
    //     redirect: "/login/?previous=/favicon.ico",
    //     name: "YouPorn"
    // }, 
    {        
        domain: "https://slack.com",
        redirect: "/checkcookie?redir=https%3A%2F%2Fslack.com%2Ffavicon.ico%23",
        name: "Slack"
    }, {        
        domain: "https://www.khanacademy.org",
        redirect: "/login?continue=https%3A//www.khanacademy.org/favicon.ico",
        name: "Khan Academy"
    }, {        
        domain: "https://www.paypal.com",
        redirect: "/signin?returnUri=https://t.paypal.com/ts?v=1.0.0",
        name: "Paypal"
    }, {
        domain: "https://500px.com",
        redirect: "/login?r=%2Ffavicon.ico",
        name: "500px"
    }, {
        domain: "https://www.airbnb.com",
        redirect: "/login?redirect_params[action]=favicon.ico&redirect_params[controller]=home",
        name: "Airbnb"
    }, {
        domain: "https://disqus.com",
        redirect: "/profile/login/?next=https%3A%2F%2Fdisqus.com%2Ffavicon.ico",
        name: "Disqus"
    }, {
        domain: "https://secure.meetup.com",
        redirect: "/login/?returnUri=https%3A%2F%2Fwww.meetup.com%2Fimg%2Fajax_loader_trans.gif",
        name: "Meetup"
    }, {        
        domain: "https://bitbucket.org",
        redirect: "/account/signin/?next=/favicon.ico",
        name: "BitBucket"
    }, {        
        domain: "https://secure.indeed.com",
        redirect: "/account/login?continue=%2ffavicon.ico",
        name: "Indeed"
    }];

    //     Do not work because they do not redirect immediately or fixed the issue
    //     {
    //         url: "https://login.live.com/login.srf?wa=wsignin1.0&wreply=https%3A%2F%2Fprofile.microsoft.com%2FregsysProfilecenter%2FImages%2FLogin.jpg",
    //         name: "Microsoft"
    //     }, {
    //         url: "https://slack.com/signin?redir=%2Ffavicon.ico",
    //         name: "Slack"
    //     }, {
    //         url: "https://tablet.www.linkedin.com/splash?redirect_url=https%3A%2F%2Fwww.linkedin.com%2Ffavicon.ico%3Fgid%3D54384%26trk%3Dfulpro_grplogo",
    //         name: "Linkedin"
    //     }, {
    //          domain: "https://subscribe.washingtonpost.com/loginregistration/index.html#/register/group/default?action=login&destination=https:%2F%2Fwashingtonpost.com%2Ffavicon.ico",
    //          redirect: "/login/?previous=/favicon.ico",
    //          name: "Washington Post"
    //     }, {
    //          domain: "https://www.instagram.com",
    //          redirect: "/accounts/login/?next=%2Ffavicon.ico",
    //          name: "Instagram"
    //      }

    platforms.forEach(function(network) {
        var img = document.createElement('img');
        img.src = network.domain + network.redirect;
        img.onload = function() {
            callback(network, true);
        };
        img.onerror = function() {
            callback(network, false);
        };
    });
};

var isFirstLoggedIn = true;
function displayResult(network, loggedIn) {
    var id = loggedIn ? 'loggedIn' : 'notLoggedIn';
    var favicon = faviconUri(network);
    var url = network.domain + network.redirect;
    var el = '<a target="_blank" href="' + url + '" target="_blank" class=network><img src=' + favicon + '><span>' + network.name + '</span></a>';
    if (loggedIn && isFirstLoggedIn) {
        isFirstLoggedIn = false;
        document.getElementById(id).innerHTML = el;
    } else {
        document.getElementById(id).innerHTML += el;
    }
}

leakSocialMediaAccounts(displayResult);

function faviconUri(network) {
    var favicon = network.domain + '/favicon.ico';
    if (network.name === 'Dropbox') {
        favicon = 'https://www.dropbox.com/static/images/favicon.ico';
    }
    if (network.name === 'Youtube') {
        favicon = 'https://www.youtube.com/favicon.ico';
    }
    if (network.name === 'Gmail') {
        favicon = 'https://mail.google.com/favicon.ico';
    }
    return favicon;
}

// 

// var login = Object();

// function login_status(a, b) {
//     div = document.createElement('div');
//     if (b == 1){
//         div.innerHTML = a + ': logged in';
//         div.style.color = 'red';
//     } else {
//         div.innerHTML = a + ': not logged in';
//         div.style.color = 'green';
//     }
//     document.body.appendChild(div);
// };

// function img(a, b) {
//     var i = new Image();
//     i.onload = function () {
//         login_status(b, 1);
//         i = i.onload = i.onerror = undefined
//     };
//     i.onerror = function () {
//         login_status(b, 0);
//         i = i.onload = i.onerror = undefined
//     };
//     i.src = a
// };

// img('https://accounts.google.com/CheckCookie?continue=https://www.google.com/intl/en/images/logos/accounts_logo.png?' + Math.random(), 'google');
// img('https://plus.google.com/up/?continue=https://www.google.com/intl/en/images/logos/accounts_logo.png&type=st&gpsrc=ogpy0&' + Math.random(), 'plus.google');
// img('https://twitter.com/login?redirect_after_login=%2Fimages%2Fspinner.gif?' + Math.random(), 'twitter');
// img('http://vk.com/login.php?act=slogin&fast=1&auto=1&to=ZmF2aWNvbi5pY28-&' + Math.random(), 'vk');
// img('http://www.facebook.com/login.php?next=http%3A%2F%2Fwww.facebook.com%2Ffavicon.ico?' + Math.random(), 'facebook');
$(document).ready(function() {
    app.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLmpzIiwiX2FwcC5tYXAuanMiLCJfYXBwLnNhbmR3aWNoLmpzIiwiX2Z1bmN0aW9ucy5qcyIsIl9zb2NpYWwtYWNjb3VudHMuanMiLCJpbml0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDNVBBO0FBQ0E7QUFDQSIsImZpbGUiOiJfLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhcHAgfHwge307XG5cbihmdW5jdGlvbihib2R5KXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFwcCA9IHtcbiAgICAgICAgXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5tYXAuaW5pdCgpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG59KShkb2N1bWVudC5ib2R5KTsiLCJ2YXIgYXBwID0gYXBwIHx8IHt9O1xuXG4oZnVuY3Rpb24oYm9keSl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhcHAubWFwID0ge1xuICAgICAgICBcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhbGVydChcIm1hcFwiKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxufSkoZG9jdW1lbnQuYm9keSk7IiwiOyhmdW5jdGlvbiAoJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgJC5hcHAgPSAkLmFwcCB8fCB7fTtcblxuICAgIHZhciBfdGhpcztcblxuICAgICQuYXBwLnNhbmR3aWNoID0ge1xuXG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAga2V5SG9va3M6ICExLFxuICAgICAgICAgICAgc2VsZWN0b3I6ICcuanMtc2FuZHdpY2gtbWVudScsXG4gICAgICAgICAgICB3cmFwcGVyOiAnLmxheW91dC13cmFwcGVyJyxcbiAgICAgICAgICAgIG92ZXJsYXk6ICcub3ZlcmxheSdcbiAgICAgICAgfSxcblxuICAgICAgICBleHRlbmQ6IGZ1bmN0aW9uKGNvbmZpZylcbiAgICAgICAge1xuICAgICAgICAgICAgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIHg7XG4gICAgICAgICAgICAgICAgZm9yICh4IGluIGNvbmZpZylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMuY29uZmlnW3hdICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbmZpZ1t4XSA9IGNvbmZpZ1t4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNPcGVuOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBib2R5Lmhhc0NsYXNzKCdwYWdlLXZpc2libGUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGJvZHkucmVtb3ZlQ2xhc3MoJ3BhZ2Utb3BlbicpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgYm9keS5yZW1vdmVDbGFzcygncGFnZS12aXNpYmxlJyk7XG4gICAgICAgICAgICB9LCAxMCk7XG5cbiAgICAgICAgICAgICQodGhpcy5jb25maWcub3ZlcmxheSkuY3NzKHtcbiAgICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICdoaWRkZW4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGJvZHkuaGFzQ2xhc3MoJ3BhZ2UtdmlzaWJsZScpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgYm9keS5yZW1vdmVDbGFzcygncGFnZS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgYm9keS5hZGRDbGFzcygncGFnZS12aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBib2R5LnRvZ2dsZUNsYXNzKCdwYWdlLW9wZW4nKTtcblxuICAgICAgICAgICAgdmFyIHZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG5cbiAgICAgICAgICAgIGlmICghYm9keS5oYXNDbGFzcygncGFnZS1vcGVuJykpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eSA9ICdoaWRkZW4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICQoX3RoaXMuY29uZmlnLm92ZXJsYXkpLmNzcyh7XG4gICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiB2aXNpYmlsaXR5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBzYW5kd2ljaFRyaWdnZXI6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAoX3RoaXMuY29uZmlnLmtleUhvb2tzKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJvZHkub24oJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGUua2V5Q29kZSA9PSAyNyAmJiBfdGhpcy5pc09wZW4oKSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGJvZHkub24oJ2NsaWNrJywgX3RoaXMuY29uZmlnLnNlbGVjdG9yLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ID8gZS5wcmV2ZW50RGVmYXVsdCgpIDogZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb3ZlcmxheVRyaWdnZXI6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICBib2R5Lm9uKCdjbGljaycsIF90aGlzLmNvbmZpZy5vdmVybGF5LCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbihjb25maWcpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZXh0ZW5kKGNvbmZpZyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2FuZHdpY2hUcmlnZ2VyKCk7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlUcmlnZ2VyKCk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbn0pKGpRdWVyeSk7XG4gIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIHVwZGF0ZUNhcHRjaGEoc2VsZWN0b3IpIHtcbiAgICBpZiAoJChzZWxlY3RvcikubGVuZ3RoKSB7XG4gICAgICAgIHZhciBzcmMgPSAkKHNlbGVjdG9yKS5hdHRyKCdzcmMnKS5zcGxpdCgnPycpWzBdO1xuICAgICAgICAkKHNlbGVjdG9yKS5hdHRyKCdzcmMnLCBzcmMgKyAnPycgKyBNYXRoLnJhbmRvbSgpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxvY2tTY3JvbGwoZWxlbWVudCkge1xuICAgIHZhciBsb2NrWCwgbG9ja1ksIGV2ZW50cyA9IFsnc2Nyb2xsJywgJ21vdXNld2hlZWwnLCAndG91Y2htb3ZlJ10sIGtleXMgPSB7Mzc6IDEsIDM4OiAxLCAzOTogMSwgNDA6IDF9O1xuXG4gICAgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xuICAgICAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XG4gICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyAgXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzKGUpIHtcbiAgICAgICAgaWYgKGtleXNbZS5rZXlDb2RlXSkge1xuICAgICAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXNhYmxlU2Nyb2xsKCkge1xuICAgICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIC8vIG9sZGVyIEZGXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cub253aGVlbCA9IHByZXZlbnREZWZhdWx0OyAvLyBtb2Rlcm4gc3RhbmRhcmRcbiAgICAgICAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IHByZXZlbnREZWZhdWx0OyAvLyBvbGRlciBicm93c2VycywgSUVcbiAgICAgICAgd2luZG93Lm9udG91Y2htb3ZlICA9IHByZXZlbnREZWZhdWx0OyAvLyBtb2JpbGVcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duICA9IHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbmFibGVTY3JvbGwoKSB7XG4gICAgICAgIGlmICh3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcilcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBudWxsOyBcbiAgICAgICAgd2luZG93Lm9ud2hlZWwgPSBudWxsOyBcbiAgICAgICAgd2luZG93Lm9udG91Y2htb3ZlID0gbnVsbDsgIFxuICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSBudWxsOyAgXG4gICAgfVxuXG4gICAgLy8gZnVuY3Rpb24gZGlzYWJsZVNjcm9sbGluZygpe1xuICAgIC8vICAgICB2YXIgeD13aW5kb3cuc2Nyb2xsWDtcbiAgICAvLyAgICAgdmFyIHk9d2luZG93LnNjcm9sbFk7XG4gICAgLy8gICAgIHdpbmRvdy5vbnNjcm9sbD1mdW5jdGlvbigpe3dpbmRvdy5zY3JvbGxUbyh4LCB5KTt9O1xuICAgIC8vIH1cblxuICAgIC8vIGZ1bmN0aW9uIGVuYWJsZVNjcm9sbGluZygpe1xuICAgIC8vICAgICB3aW5kb3cub25zY3JvbGw9ZnVuY3Rpb24oKXt9O1xuICAgIC8vIH1cblxuICAgIC8vIGZ1bmN0aW9uIGRpc2FibGVfc2Nyb2xsKCkge1xuICAgIC8vICAgIC4uLlxuICAgIC8vICAgIGRvY3VtZW50Lm9udG91Y2htb3ZlID0gZnVuY3Rpb24oZSl7IFxuICAgIC8vICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAvLyAgICB9XG4gICAgLy8gfVxuXG4gICAgLy8gZnVuY3Rpb24gZW5hYmxlX3Njcm9sbCgpIHtcbiAgICAvLyAgICAuLi5cbiAgICAvLyAgICBkb2N1bWVudC5vbnRvdWNobW92ZSA9IGZ1bmN0aW9uKGUpeyBcbiAgICAvLyAgICAgIHJldHVybiB0cnVlOyBcbiAgICAvLyAgICB9XG4gICAgLy8gfVxuXG5cblxuICAgIC8vIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KTtcblxuICAgIC8vIGUucHJldmVudERlZmF1bHQgPyBlLnByZXZlbnREZWZhdWx0KCkgOiBlLnJldHVyblZhbHVlID0gZmFsc2U7XG5cbiAgICAvLyBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBmdW5jdGlvbihlKSB7XG4gICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyB9LCBmYWxzZSk7XG5cbiAgICAvLyBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vIH0sIGZhbHNlKTtcblxuICAgIC8vIGxvY2tYID0gd2luZG93LnNjcm9sbFg7XG4gICAgLy8gbG9ja1kgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICAgIC8vIGZ1bmN0aW9uIGxvY2tJdCgpIHtcbiAgICAvLyAgICAgd2luZG93LnNjcm9sbFRvKGxvY2tYLGxvY2tZKTtcbiAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vIH1cblxuICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsbG9ja0l0LGZhbHNlKVxuXG4gICAgLy8gcmV0dXJuIHtcbiAgICAvLyAgICAgc3RvcDogZnVuY3Rpb24oKXtcbiAgICAvLyAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsbG9ja0l0LGZhbHNlKVxuICAgIC8vICAgICB9XG4gICAgLy8gfVxufVxuXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdvbnRvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4vLyAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4vLyB9LCBmYWxzZSk7XG5cbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ29udG91Y2htb3ZlJywgZnVuY3Rpb24oZSkge1xuLy8gICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbi8vIH0sIGZhbHNlKTtcblxuLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignb250b3VjaHN0YXJ0JywgZnVuY3Rpb24oZSkge2UucHJldmVudERlZmF1bHQoKX0sIGZhbHNlKTtcbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ29udG91Y2htb3ZlJywgZnVuY3Rpb24oZSkge2UucHJldmVudERlZmF1bHQoKX0sIGZhbHNlKTtcblxuLy8gdmFyIGxvY2tlciA9IGxvY2tTY3JvbGwoKTsgLy8gbG9ja3Mgc2Nyb2xsaW5nXG4vLyBsb2NrZXIuc3RvcCgpOyAgLy8gdW5sb2NrcyBzY3JvbGxpbmdcblxuLy8gJCgnI2VsZW1lbnQnKS5vbignc2Nyb2xsIHRvdWNobW92ZSBtb3VzZXdoZWVsJywgZnVuY3Rpb24oZSl7XG4vLyAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbi8vICAgcmV0dXJuIGZhbHNlO1xuLy8gfSlcblxuXG4vLyB2YXIgdHJhcFNjcm9sbDtcblxuLy8gKGZ1bmN0aW9uKCQpe1xuICBcbi8vICAgdHJhcFNjcm9sbCA9IGZ1bmN0aW9uKG9wdCl7XG4gICAgXG4vLyAgICAgdmFyIHRyYXBFbGVtZW50O1xuLy8gICAgIHZhciBzY3JvbGxhYmxlRGlzdDtcbi8vICAgICB2YXIgdHJhcENsYXNzTmFtZSA9ICd0cmFwU2Nyb2xsLWVuYWJsZWQnO1xuLy8gICAgIHZhciB0cmFwU2VsZWN0b3IgPSAnLnRyYXBTY3JvbGwnO1xuICAgIFxuLy8gICAgIHZhciB0cmFwV2hlZWwgPSBmdW5jdGlvbihlKXtcbiAgICAgIFxuLy8gICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3ModHJhcENsYXNzTmFtZSkpIHtcbiAgICAgICAgXG4vLyAgICAgICAgIHJldHVybjtcbiAgICAgICAgXG4vLyAgICAgICB9IGVsc2UgeyAgXG4gICAgICAgIFxuLy8gICAgICAgICB2YXIgY3VyU2Nyb2xsUG9zID0gdHJhcEVsZW1lbnQuc2Nyb2xsVG9wKCk7XG4vLyAgICAgICAgIHZhciB3aGVlbEV2ZW50ID0gZS5vcmlnaW5hbEV2ZW50O1xuLy8gICAgICAgICB2YXIgZFkgPSB3aGVlbEV2ZW50LmRlbHRhWTtcblxuLy8gICAgICAgICAvLyBvbmx5IHRyYXAgZXZlbnRzIG9uY2Ugd2UndmUgc2Nyb2xsZWQgdG8gdGhlIGVuZFxuLy8gICAgICAgICAvLyBvciBiZWdpbm5pbmdcbi8vICAgICAgICAgaWYgKChkWT4wICYmIGN1clNjcm9sbFBvcyA+PSBzY3JvbGxhYmxlRGlzdCkgfHxcbi8vICAgICAgICAgICAgIChkWTwwICYmIGN1clNjcm9sbFBvcyA8PSAwKSkge1xuXG4vLyAgICAgICAgICAgb3B0Lm9uU2Nyb2xsRW5kKCk7XG4vLyAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIFxuLy8gICAgICAgICB9XG4gICAgICAgIFxuLy8gICAgICAgfVxuICAgICAgXG4vLyAgICAgfVxuICAgIFxuLy8gICAgICQoZG9jdW1lbnQpXG4vLyAgICAgICAub24oJ3doZWVsJywgdHJhcFdoZWVsKVxuLy8gICAgICAgLm9uKCdtb3VzZWxlYXZlJywgdHJhcFNlbGVjdG9yLCBmdW5jdGlvbigpe1xuICAgICAgICBcbi8vICAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKHRyYXBDbGFzc05hbWUpO1xuICAgICAgXG4vLyAgICAgICB9KVxuLy8gICAgICAgLm9uKCdtb3VzZWVudGVyJywgdHJhcFNlbGVjdG9yLCBmdW5jdGlvbigpeyAgIFxuICAgICAgXG4vLyAgICAgICAgIHRyYXBFbGVtZW50ID0gJCh0aGlzKTtcbi8vICAgICAgICAgdmFyIGNvbnRhaW5lckhlaWdodCA9IHRyYXBFbGVtZW50Lm91dGVySGVpZ2h0KCk7XG4vLyAgICAgICAgIHZhciBjb250ZW50SGVpZ2h0ID0gdHJhcEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0OyAvLyBoZWlnaHQgb2Ygc2Nyb2xsYWJsZSBjb250ZW50XG4vLyAgICAgICAgIHNjcm9sbGFibGVEaXN0ID0gY29udGVudEhlaWdodCAtIGNvbnRhaW5lckhlaWdodDtcbiAgICAgICAgXG4vLyAgICAgICAgIGlmIChjb250ZW50SGVpZ2h0PmNvbnRhaW5lckhlaWdodClcbi8vICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3ModHJhcENsYXNzTmFtZSk7IFxuICAgICAgXG4vLyAgICAgICB9KTsgICAgICAgXG4vLyAgIH1cbi8vIH0pKCQpO1xuXG4vLyB2YXIgcHJldmVudGVkQ291bnQgPSAwO1xuLy8gdmFyIHNob3dFdmVudFByZXZlbnRlZE1zZyA9IGZ1bmN0aW9uKCl7ICBcbi8vICAgJCgnI21vdXNld2hlZWwtcHJldmVudGVkJykuc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6IDF9LCAnZmFzdCcpO1xuLy8gfVxuLy8gdmFyIGhpZGVFdmVudFByZXZlbnRlZE1zZyA9IGZ1bmN0aW9uKCl7XG4vLyAgICQoJyNtb3VzZXdoZWVsLXByZXZlbnRlZCcpLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAwfSwgJ2Zhc3QnKTtcbi8vIH1cbi8vIHZhciBhZGRQcmV2ZW50ZWRDb3VudCA9IGZ1bmN0aW9uKCl7XG4vLyAgICQoJyNwcmV2ZW50ZWQtY291bnQnKS5odG1sKCdwcmV2ZW50ZWQgPHNtYWxsPng8L3NtYWxsPicgKyBwcmV2ZW50ZWRDb3VudCsrKTtcbi8vIH1cblxuLy8gdHJhcFNjcm9sbCh7IG9uU2Nyb2xsRW5kOiBhZGRQcmV2ZW50ZWRDb3VudCB9KTtcbi8vICQoJy50cmFwU2Nyb2xsJylcbi8vICAgLm9uKCdtb3VzZWVudGVyJywgc2hvd0V2ZW50UHJldmVudGVkTXNnKVxuLy8gICAub24oJ21vdXNlbGVhdmUnLCBoaWRlRXZlbnRQcmV2ZW50ZWRNc2cpOyAgICAgIFxuLy8gJCgnW2lkKj1cInBhcmVudFwiXScpLnNjcm9sbFRvcCgxMDApO1xuXG52YXIgaXNKc29uID0gZnVuY3Rpb24oaXRlbSkge1xuICAgIGl0ZW0gPSB0eXBlb2YgaXRlbSAhPT0gXCJzdHJpbmdcIiA/IEpTT04uc3RyaW5naWZ5KGl0ZW0pIDogaXRlbTtcblxuICAgIHRyeSB7XG4gICAgICAgIGl0ZW0gPSBKU09OLnBhcnNlKGl0ZW0pO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIGl0ZW0gIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5TdHJpbmcucHJvdG90eXBlLnRvSEhNTVNTID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWNfbnVtID0gcGFyc2VJbnQodGhpcywgMTApOyAvLyBkb24ndCBmb3JnZXQgdGhlIHNlY29uZCBwYXJhbVxuICAgIHZhciBob3VycyAgID0gTWF0aC5mbG9vcihzZWNfbnVtIC8gMzYwMCk7XG4gICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNfbnVtIC0gKGhvdXJzICogMzYwMCkpIC8gNjApO1xuICAgIHZhciBzZWNvbmRzID0gc2VjX251bSAtIChob3VycyAqIDM2MDApIC0gKG1pbnV0ZXMgKiA2MCk7XG5cbiAgICBpZiAoaG91cnMgICA8IDEwKSB7aG91cnMgICA9IFwiMFwiK2hvdXJzO31cbiAgICBpZiAobWludXRlcyA8IDEwKSB7bWludXRlcyA9IFwiMFwiK21pbnV0ZXM7fVxuICAgIGlmIChzZWNvbmRzIDwgMTApIHtzZWNvbmRzID0gXCIwXCIrc2Vjb25kczt9XG4gICAgcmV0dXJuIGhvdXJzKyc6JyttaW51dGVzKyc6JytzZWNvbmRzO1xufVxuIiwidmFyIGxlYWtTb2NpYWxNZWRpYUFjY291bnRzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgcGxhdGZvcm1zID0gW3tcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vc3F1YXJldXAuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9yZXR1cm5fdG89JTJGZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJTcXVhcmVcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vdHdpdHRlci5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP3JlZGlyZWN0X2FmdGVyX2xvZ2luPSUyRmZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiVHdpdHRlclwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbi5waHA/bmV4dD1odHRwcyUzQSUyRiUyRnd3dy5mYWNlYm9vay5jb20lMkZmYXZpY29uLmljbyUzRl9yZHIlM0RwXCIsXG4gICAgICAgIG5hbWU6IFwiRmFjZWJvb2tcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvU2VydmljZUxvZ2luP3Bhc3NpdmU9dHJ1ZSZjb250aW51ZT1odHRwcyUzQSUyRiUyRnd3dy5nb29nbGUuY29tJTJGZmF2aWNvbi5pY28mdWlsZWw9MyZobD1lbiZzZXJ2aWNlPW1haWxcIixcbiAgICAgICAgbmFtZTogXCJHbWFpbFwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9TZXJ2aWNlTG9naW4/cGFzc2l2ZT10cnVlJmNvbnRpbnVlPWh0dHBzJTNBJTJGJTJGd3d3LnlvdXR1YmUuY29tJTJGZmF2aWNvbi5pY28mdWlsZWw9MyZobD1lbiZzZXJ2aWNlPXlvdXR1YmVcIixcbiAgICAgICAgbmFtZTogXCJZb3V0dWJlXCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3BsdXMuZ29vZ2xlLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvdXAvYWNjb3VudHMvdXBncmFkZS8/Y29udGludWU9aHR0cHM6Ly9wbHVzLmdvb2dsZS5jb20vZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJHb29nbGUgUGx1c1wiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9sb2dpbi5za3lwZS5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP21lc3NhZ2U9c2lnbmluX2NvbnRpbnVlJnJlZGlyZWN0X3VyaT1odHRwcyUzQSUyRiUyRnNlY3VyZS5za3lwZS5jb20lMkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIlNreXBlXCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5mbGlja3IuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9zaWduaW4veWFob28vP3JlZGlyPWh0dHBzJTNBJTJGJTJGd3d3LmZsaWNrci5jb20vZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJGbGlja3JcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vd3d3LnNwb3RpZnkuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9lbi9sb2dpbi8/Zm9yd2FyZF91cmw9aHR0cHMlM0ElMkYlMkZ3d3cuc3BvdGlmeS5jb20lMkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIlNwb3RpZnlcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vd3d3LnJlZGRpdC5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP2Rlc3Q9aHR0cHMlM0ElMkYlMkZ3d3cucmVkZGl0LmNvbSUyRmZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiUmVkZGl0XCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy50dW1ibHIuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9yZWRpcmVjdF90bz0lMkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIlR1bWJsclwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly93d3cuZXhwZWRpYS5kZVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvdXNlci9sb2dpbj9ja29mbGFnPTAmc2VsYz0wJnV1cmw9cXNjciUzRHJlZHMlMjZydXJsJTNEJTI1MkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIkV4cGVkaWFcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vd3d3LmRyb3Bib3guY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9jb250PWh0dHBzJTNBJTJGJTJGd3d3LmRyb3Bib3guY29tJTJGc3RhdGljJTJGaW1hZ2VzJTJGYWJvdXQlMkZkcm9wYm94X2xvZ29fZ2x5cGhfMjAxNS5zdmdcIixcbiAgICAgICAgbmFtZTogXCJEcm9wYm94XCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5hbWF6b24uY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9hcC9zaWduaW4vMTc4LTQ0MTcwMjctMTMxNjA2ND9fZW5jb2Rpbmc9VVRGOCZvcGVuaWQuYXNzb2NfaGFuZGxlPXVzZmxleCZvcGVuaWQuY2xhaW1lZF9pZD1odHRwJTNBJTJGJTJGc3BlY3Mub3BlbmlkLm5ldCUyRmF1dGglMkYyLjAlMkZpZGVudGlmaWVyX3NlbGVjdCZvcGVuaWQuaWRlbnRpdHk9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJTJGaWRlbnRpZmllcl9zZWxlY3Qmb3BlbmlkLm1vZGU9Y2hlY2tpZF9zZXR1cCZvcGVuaWQubnM9aHR0cCUzQSUyRiUyRnNwZWNzLm9wZW5pZC5uZXQlMkZhdXRoJTJGMi4wJm9wZW5pZC5ucy5wYXBlPWh0dHAlM0ElMkYlMkZzcGVjcy5vcGVuaWQubmV0JTJGZXh0ZW5zaW9ucyUyRnBhcGUlMkYxLjAmb3BlbmlkLnBhcGUubWF4X2F1dGhfYWdlPTEwMDAwMDAwJm9wZW5pZC5yZXR1cm5fdG89aHR0cHMlM0ElMkYlMkZ3d3cuYW1hem9uLmNvbSUyRmZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiQW1hem9uLmNvbVwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly93d3cucGludGVyZXN0LmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvbG9naW4vP25leHQ9aHR0cHMlM0ElMkYlMkZ3d3cucGludGVyZXN0LmNvbSUyRmZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiUGludGVyZXN0XCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5uZXRmbGl4LmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvTG9naW4/bmV4dHBhZ2U9JTJGZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJOZXRmbGl4XCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL2RlLmZvdXJzcXVhcmUuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9jb250aW51ZT0lMkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIkZvdXJzcXVhcmVcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vZXUuYmF0dGxlLm5ldFwiLFxuICAgICAgICByZWRpcmVjdDogXCIvbG9naW4vZGUvaW5kZXg/cmVmPWh0dHA6Ly9ldS5iYXR0bGUubmV0L2Zhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiQmF0dGxlLm5ldFwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9zdG9yZS5zdGVhbXBvd2VyZWQuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbi8/cmVkaXI9ZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJTdGVhbVwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly93d3cuYWNhZGVtaWEuZWR1XCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9jcD0vZmF2aWNvbi5pY28mY3M9d3d3XCIsXG4gICAgICAgIG5hbWU6IFwiQWNhZGVtaWEuZWR1XCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi91c2Vycy9sb2dpbj9zc3JjPWhlYWQmcmV0dXJudXJsPWh0dHAlM2ElMmYlMmZzdGFja292ZXJmbG93LmNvbSUyZmZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiU3RhY2sgT3ZlcmZsb3dcIlxuICAgIH0sICwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9TZXJ2aWNlTG9naW4/c2VydmljZT1ibG9nZ2VyJmhsPWRlJnBhc3NpdmU9MTIwOTYwMCZjb250aW51ZT1odHRwczovL3d3dy5ibG9nZ2VyLmNvbS9mYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIkJsb2dnZXJcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vZ2l0aHViLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvbG9naW4/cmV0dXJuX3RvPWh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmZhdmljb24uaWNvJTNGaWQlM0QxXCIsXG4gICAgICAgIG5hbWU6IFwiR2l0aHViXCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL21lZGl1bS5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL20vc2lnbmluP3JlZGlyZWN0PWh0dHBzJTNBJTJGJTJGbWVkaXVtLmNvbSUyRmZhdmljb24uaWNvJmxvZ2luVHlwZT1kZWZhdWx0XCIsXG4gICAgICAgIG5hbWU6IFwiTWVkaXVtXCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL25ld3MueWNvbWJpbmF0b3IuY29tXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9sb2dpbj9nb3RvPWZhdmljb24uaWNvJTIzXCIsXG4gICAgICAgIG5hbWU6IFwiSGFja2VybmV3c1wiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9jYXJib25tYWRlLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvc2lnbmluP3JldHVyblRvPWZhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiQ2FyYm9ubWFkZVwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9jb3Vyc2VzLmVkeC5vcmdcIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP25leHQ9L2Zhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiRWRYXCJcbiAgICB9LCB7XG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5zcGllZ2VsLmRlXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcIi9tZWluc3BpZWdlbC9sb2dpbi5odG1sP2JhY2tVcmw9JTJGZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJTcGllZ2VsIE9ubGluZVwiXG4gICAgfSxcbiAgICAvLyAge1xuICAgIC8vICAgICBkb21haW46IFwiaHR0cDovL3d3dy55b3Vwb3JuLmNvbVwiLFxuICAgIC8vICAgICByZWRpcmVjdDogXCIvbG9naW4vP3ByZXZpb3VzPS9mYXZpY29uLmljb1wiLFxuICAgIC8vICAgICBuYW1lOiBcIllvdVBvcm5cIlxuICAgIC8vIH0sIFxuICAgIHsgICAgICAgIFxuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9zbGFjay5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2NoZWNrY29va2llP3JlZGlyPWh0dHBzJTNBJTJGJTJGc2xhY2suY29tJTJGZmF2aWNvbi5pY28lMjNcIixcbiAgICAgICAgbmFtZTogXCJTbGFja1wiXG4gICAgfSwgeyAgICAgICAgXG4gICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5raGFuYWNhZGVteS5vcmdcIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP2NvbnRpbnVlPWh0dHBzJTNBLy93d3cua2hhbmFjYWRlbXkub3JnL2Zhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiS2hhbiBBY2FkZW15XCJcbiAgICB9LCB7ICAgICAgICBcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vd3d3LnBheXBhbC5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL3NpZ25pbj9yZXR1cm5Vcmk9aHR0cHM6Ly90LnBheXBhbC5jb20vdHM/dj0xLjAuMFwiLFxuICAgICAgICBuYW1lOiBcIlBheXBhbFwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly81MDBweC5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2xvZ2luP3I9JTJGZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCI1MDBweFwiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly93d3cuYWlyYm5iLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvbG9naW4/cmVkaXJlY3RfcGFyYW1zW2FjdGlvbl09ZmF2aWNvbi5pY28mcmVkaXJlY3RfcGFyYW1zW2NvbnRyb2xsZXJdPWhvbWVcIixcbiAgICAgICAgbmFtZTogXCJBaXJibmJcIlxuICAgIH0sIHtcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vZGlzcXVzLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvcHJvZmlsZS9sb2dpbi8/bmV4dD1odHRwcyUzQSUyRiUyRmRpc3F1cy5jb20lMkZmYXZpY29uLmljb1wiLFxuICAgICAgICBuYW1lOiBcIkRpc3F1c1wiXG4gICAgfSwge1xuICAgICAgICBkb21haW46IFwiaHR0cHM6Ly9zZWN1cmUubWVldHVwLmNvbVwiLFxuICAgICAgICByZWRpcmVjdDogXCIvbG9naW4vP3JldHVyblVyaT1odHRwcyUzQSUyRiUyRnd3dy5tZWV0dXAuY29tJTJGaW1nJTJGYWpheF9sb2FkZXJfdHJhbnMuZ2lmXCIsXG4gICAgICAgIG5hbWU6IFwiTWVldHVwXCJcbiAgICB9LCB7ICAgICAgICBcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vYml0YnVja2V0Lm9yZ1wiLFxuICAgICAgICByZWRpcmVjdDogXCIvYWNjb3VudC9zaWduaW4vP25leHQ9L2Zhdmljb24uaWNvXCIsXG4gICAgICAgIG5hbWU6IFwiQml0QnVja2V0XCJcbiAgICB9LCB7ICAgICAgICBcbiAgICAgICAgZG9tYWluOiBcImh0dHBzOi8vc2VjdXJlLmluZGVlZC5jb21cIixcbiAgICAgICAgcmVkaXJlY3Q6IFwiL2FjY291bnQvbG9naW4/Y29udGludWU9JTJmZmF2aWNvbi5pY29cIixcbiAgICAgICAgbmFtZTogXCJJbmRlZWRcIlxuICAgIH1dO1xuXG4gICAgLy8gICAgIERvIG5vdCB3b3JrIGJlY2F1c2UgdGhleSBkbyBub3QgcmVkaXJlY3QgaW1tZWRpYXRlbHkgb3IgZml4ZWQgdGhlIGlzc3VlXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAgIHVybDogXCJodHRwczovL2xvZ2luLmxpdmUuY29tL2xvZ2luLnNyZj93YT13c2lnbmluMS4wJndyZXBseT1odHRwcyUzQSUyRiUyRnByb2ZpbGUubWljcm9zb2Z0LmNvbSUyRnJlZ3N5c1Byb2ZpbGVjZW50ZXIlMkZJbWFnZXMlMkZMb2dpbi5qcGdcIixcbiAgICAvLyAgICAgICAgIG5hbWU6IFwiTWljcm9zb2Z0XCJcbiAgICAvLyAgICAgfSwge1xuICAgIC8vICAgICAgICAgdXJsOiBcImh0dHBzOi8vc2xhY2suY29tL3NpZ25pbj9yZWRpcj0lMkZmYXZpY29uLmljb1wiLFxuICAgIC8vICAgICAgICAgbmFtZTogXCJTbGFja1wiXG4gICAgLy8gICAgIH0sIHtcbiAgICAvLyAgICAgICAgIHVybDogXCJodHRwczovL3RhYmxldC53d3cubGlua2VkaW4uY29tL3NwbGFzaD9yZWRpcmVjdF91cmw9aHR0cHMlM0ElMkYlMkZ3d3cubGlua2VkaW4uY29tJTJGZmF2aWNvbi5pY28lM0ZnaWQlM0Q1NDM4NCUyNnRyayUzRGZ1bHByb19ncnBsb2dvXCIsXG4gICAgLy8gICAgICAgICBuYW1lOiBcIkxpbmtlZGluXCJcbiAgICAvLyAgICAgfSwge1xuICAgIC8vICAgICAgICAgIGRvbWFpbjogXCJodHRwczovL3N1YnNjcmliZS53YXNoaW5ndG9ucG9zdC5jb20vbG9naW5yZWdpc3RyYXRpb24vaW5kZXguaHRtbCMvcmVnaXN0ZXIvZ3JvdXAvZGVmYXVsdD9hY3Rpb249bG9naW4mZGVzdGluYXRpb249aHR0cHM6JTJGJTJGd2FzaGluZ3RvbnBvc3QuY29tJTJGZmF2aWNvbi5pY29cIixcbiAgICAvLyAgICAgICAgICByZWRpcmVjdDogXCIvbG9naW4vP3ByZXZpb3VzPS9mYXZpY29uLmljb1wiLFxuICAgIC8vICAgICAgICAgIG5hbWU6IFwiV2FzaGluZ3RvbiBQb3N0XCJcbiAgICAvLyAgICAgfSwge1xuICAgIC8vICAgICAgICAgIGRvbWFpbjogXCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tXCIsXG4gICAgLy8gICAgICAgICAgcmVkaXJlY3Q6IFwiL2FjY291bnRzL2xvZ2luLz9uZXh0PSUyRmZhdmljb24uaWNvXCIsXG4gICAgLy8gICAgICAgICAgbmFtZTogXCJJbnN0YWdyYW1cIlxuICAgIC8vICAgICAgfVxuXG4gICAgcGxhdGZvcm1zLmZvckVhY2goZnVuY3Rpb24obmV0d29yaykge1xuICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGltZy5zcmMgPSBuZXR3b3JrLmRvbWFpbiArIG5ldHdvcmsucmVkaXJlY3Q7XG4gICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG5ldHdvcmssIHRydWUpO1xuICAgICAgICB9O1xuICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV0d29yaywgZmFsc2UpO1xuICAgICAgICB9O1xuICAgIH0pO1xufTtcblxudmFyIGlzRmlyc3RMb2dnZWRJbiA9IHRydWU7XG5mdW5jdGlvbiBkaXNwbGF5UmVzdWx0KG5ldHdvcmssIGxvZ2dlZEluKSB7XG4gICAgdmFyIGlkID0gbG9nZ2VkSW4gPyAnbG9nZ2VkSW4nIDogJ25vdExvZ2dlZEluJztcbiAgICB2YXIgZmF2aWNvbiA9IGZhdmljb25VcmkobmV0d29yayk7XG4gICAgdmFyIHVybCA9IG5ldHdvcmsuZG9tYWluICsgbmV0d29yay5yZWRpcmVjdDtcbiAgICB2YXIgZWwgPSAnPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cIicgKyB1cmwgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3M9bmV0d29yaz48aW1nIHNyYz0nICsgZmF2aWNvbiArICc+PHNwYW4+JyArIG5ldHdvcmsubmFtZSArICc8L3NwYW4+PC9hPic7XG4gICAgaWYgKGxvZ2dlZEluICYmIGlzRmlyc3RMb2dnZWRJbikge1xuICAgICAgICBpc0ZpcnN0TG9nZ2VkSW4gPSBmYWxzZTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmlubmVySFRNTCA9IGVsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5pbm5lckhUTUwgKz0gZWw7XG4gICAgfVxufVxuXG5sZWFrU29jaWFsTWVkaWFBY2NvdW50cyhkaXNwbGF5UmVzdWx0KTtcblxuZnVuY3Rpb24gZmF2aWNvblVyaShuZXR3b3JrKSB7XG4gICAgdmFyIGZhdmljb24gPSBuZXR3b3JrLmRvbWFpbiArICcvZmF2aWNvbi5pY28nO1xuICAgIGlmIChuZXR3b3JrLm5hbWUgPT09ICdEcm9wYm94Jykge1xuICAgICAgICBmYXZpY29uID0gJ2h0dHBzOi8vd3d3LmRyb3Bib3guY29tL3N0YXRpYy9pbWFnZXMvZmF2aWNvbi5pY28nO1xuICAgIH1cbiAgICBpZiAobmV0d29yay5uYW1lID09PSAnWW91dHViZScpIHtcbiAgICAgICAgZmF2aWNvbiA9ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9mYXZpY29uLmljbyc7XG4gICAgfVxuICAgIGlmIChuZXR3b3JrLm5hbWUgPT09ICdHbWFpbCcpIHtcbiAgICAgICAgZmF2aWNvbiA9ICdodHRwczovL21haWwuZ29vZ2xlLmNvbS9mYXZpY29uLmljbyc7XG4gICAgfVxuICAgIHJldHVybiBmYXZpY29uO1xufVxuXG4vLyBcblxuLy8gdmFyIGxvZ2luID0gT2JqZWN0KCk7XG5cbi8vIGZ1bmN0aW9uIGxvZ2luX3N0YXR1cyhhLCBiKSB7XG4vLyAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4vLyAgICAgaWYgKGIgPT0gMSl7XG4vLyAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBhICsgJzogbG9nZ2VkIGluJztcbi8vICAgICAgICAgZGl2LnN0eWxlLmNvbG9yID0gJ3JlZCc7XG4vLyAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgZGl2LmlubmVySFRNTCA9IGEgKyAnOiBub3QgbG9nZ2VkIGluJztcbi8vICAgICAgICAgZGl2LnN0eWxlLmNvbG9yID0gJ2dyZWVuJztcbi8vICAgICB9XG4vLyAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuLy8gfTtcblxuLy8gZnVuY3Rpb24gaW1nKGEsIGIpIHtcbi8vICAgICB2YXIgaSA9IG5ldyBJbWFnZSgpO1xuLy8gICAgIGkub25sb2FkID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICBsb2dpbl9zdGF0dXMoYiwgMSk7XG4vLyAgICAgICAgIGkgPSBpLm9ubG9hZCA9IGkub25lcnJvciA9IHVuZGVmaW5lZFxuLy8gICAgIH07XG4vLyAgICAgaS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICBsb2dpbl9zdGF0dXMoYiwgMCk7XG4vLyAgICAgICAgIGkgPSBpLm9ubG9hZCA9IGkub25lcnJvciA9IHVuZGVmaW5lZFxuLy8gICAgIH07XG4vLyAgICAgaS5zcmMgPSBhXG4vLyB9O1xuXG4vLyBpbWcoJ2h0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9DaGVja0Nvb2tpZT9jb250aW51ZT1odHRwczovL3d3dy5nb29nbGUuY29tL2ludGwvZW4vaW1hZ2VzL2xvZ29zL2FjY291bnRzX2xvZ28ucG5nPycgKyBNYXRoLnJhbmRvbSgpLCAnZ29vZ2xlJyk7XG4vLyBpbWcoJ2h0dHBzOi8vcGx1cy5nb29nbGUuY29tL3VwLz9jb250aW51ZT1odHRwczovL3d3dy5nb29nbGUuY29tL2ludGwvZW4vaW1hZ2VzL2xvZ29zL2FjY291bnRzX2xvZ28ucG5nJnR5cGU9c3QmZ3BzcmM9b2dweTAmJyArIE1hdGgucmFuZG9tKCksICdwbHVzLmdvb2dsZScpO1xuLy8gaW1nKCdodHRwczovL3R3aXR0ZXIuY29tL2xvZ2luP3JlZGlyZWN0X2FmdGVyX2xvZ2luPSUyRmltYWdlcyUyRnNwaW5uZXIuZ2lmPycgKyBNYXRoLnJhbmRvbSgpLCAndHdpdHRlcicpO1xuLy8gaW1nKCdodHRwOi8vdmsuY29tL2xvZ2luLnBocD9hY3Q9c2xvZ2luJmZhc3Q9MSZhdXRvPTEmdG89Wm1GMmFXTnZiaTVwWTI4LSYnICsgTWF0aC5yYW5kb20oKSwgJ3ZrJyk7XG4vLyBpbWcoJ2h0dHA6Ly93d3cuZmFjZWJvb2suY29tL2xvZ2luLnBocD9uZXh0PWh0dHAlM0ElMkYlMkZ3d3cuZmFjZWJvb2suY29tJTJGZmF2aWNvbi5pY28/JyArIE1hdGgucmFuZG9tKCksICdmYWNlYm9vaycpOyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGFwcC5pbml0KCk7XG59KTsiXX0=
